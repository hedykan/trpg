# 一个基于go实现的trpg框架

## 一个web-ui
现在可以在这个[页面](https://trpg.juhuan.store)进行自己故事的编辑和试玩哦。  
生成的故事脚本以及其他文件均保存在与trpg.exe相同目录的file文件夹下。  

## 是什么
这是一个基于go实现的跑团框架，可以提供跑团所需要的相应功能

## 为什么
想做一个可以像真正面团一样的跑团系统，可以有既定的故事模组团，也可以是想个开头然后慢慢补充的脑洞团。  
所有做了一个以图为结构基础的故事系统，kp可以预先写好故事直接跑，也可以在跑的过程中调用故事新增/链接接口为故事新增故事内容。

## 系统详解
这是一个基于go实现的跑团api，由几个模块组成：
1. 故事系统 (DOWN)
2. 跑团操作系统 (DOWN)
3. 掷骰系统
4. 属性系统(角色卡)
5. 情报系统(可获取的情报记录)
6. 角色系统(kp/pl分类，token分类，可换kp/pl，也可多kp)
7. 多故事系统(同时运行多个故事，可一个系统跑多个团) (DOWN)  
总的来说，这个程序的操作员/管理员应该是kp。  
但是跑团作为一个大家都能参与的游戏来看，其实整个故事的发生与结束都是由所有的参与者决定的。  
为了保证故事的流畅性以及体验感，pl的使用权限将在下面给出。  

## 操作说明
在根目录`go build`后会生成目标可执行程序。  
运行后将监听`:12345`端口。  

## [接口文档](./docs/api.md)
在这里有详细的接口文档(虽然有不分接口参数没补齐)。  

## 简易说明
### 团基础
这里将说明一下，这个系统将如何管理一个团。  
在故事模块(story model)中，将我们正在跑的团视为一组故事，这个故事由许多节点组成，每一个节点都有选择，这个选择指向下一个节点。  
这样一组故事就为一个有向图(Graph)。  
这个故事是整个团的基石，毕竟，我们每一个跑团者都是为了享受故事而来的嘛。  
有了故事之后，就可以开始跑团了。这时候，跑团状态模块(run model)参与负责管理整个团的状态，记录如已经走过的节点，当前停留的节点，大家的投票状况等游玩信息。  

### 身份
系统中会根据玩家的身份(kp, pc, 浏览群众)等，给予大家对整个团不同的操控能力。  
如kp(主持人)，能够查看(一般玩家看不到，毕竟是剧本)，修改故事节点的选择，内容，根据pc(玩家)投票宣布团的走向等。  
pc(玩家)，能够发言，讨论，以及向kp提出自己的选择(可以是当前团没有的，kp之后再添加)和做出选择的投票等。  
浏览群众则可以查看当前的团以及和大家一起讨论等。  

### 一般过程
kp可以一开始就写完整个团，或者只根据世界观还有模组写一个开头，在跑团途中继续编辑节点。  
pc则在节点前进的节奏下，对每一个节点进行讨论以及做出选择，并与kp交流，扮演自己的角色。  

## TODO
日志
故事模板